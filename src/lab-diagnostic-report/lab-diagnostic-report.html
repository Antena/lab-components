<div ng-if="vm.observations.length" class="split-content">

    <div class="main-content" id="observations-container">
        <div class="observation-groups" ng-repeat="(group, observationsPerGroup) in vm.groupedObservations">

            <h2 id="{{ group }}" class="observation-group-title">{{ getOrderItemDisplay(group) }}</h2>

            <div class="observation-gallery">
                <lab-observation ng-repeat="observation in observationsPerGroup" id="{{ observation.id }}"
                                 observation="observation"
                                 actions="observation.actions"
                                 header-actions="observation.headerActions">
                    <lab-history-graph ng-if="observation.showHistory && !!observation.history" observation-list="observation.history"></lab-history-graph>
                </lab-observation>
            </div>

        </div>
    </div>

    <div class="secondary-content">
        <div class="lab-tree">
            <ul ng-repeat="(group, observationsPerGroup) in vm.groupedObservations" ng-init="initLabTree()">
                <li class="lab-tree-top-level lab-tree-node lab-tree-observation-group-title">
                    <a ng-if="!isTopLevel(group)" href="#{{ group}}"
                       du-smooth-scroll du-scrollspy offset="100">{{ getOrderItemDisplay(group) }}</a>

                    <div class="lab-tree-node lab-tree-observation-observation-title" ng-class="{ 'lab-tree-top-level': isTopLevel(group) }">
                        <a href="#{{ observation.id }}" ng-repeat="observation in observationsPerGroup" du-smooth-scroll du-scrollspy offset="100">
                            <span >{{ observation.code | codeableConcept | capitalize:true }}</span>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>

</div>
