<div ng-if="vm.observations.length" class="split-content">

    <div class="main-content" id="observations-container">
        <div class="observation-groups" ng-repeat="(group, observationsPerGroup) in vm.groupedObservations">

            <h2 ng-if="!isTopLevel(group)" id="{{ observationsPerGroup[0].metricGroupIdentifier._id }}" class="observation-group-title">{{ observationsPerGroup[0].metricGroupIdentifier.label | capitalize:true }}</h2>

            <div class="observation-gallery">
                <lab-observation ng-repeat="observation in observationsPerGroup" id="{{ observation._id }}"
                                 observation="observation"
                                 actions="observation.actions"
                                 header-actions="observation.headerActions">
                    <lab-history-graph ng-if="observation.showHistory && !!observation.history" observation-list="observation.history"></lab-history-graph>
                </lab-observation>
            </div>

        </div>
    </div>

    <div class="secondary-content">
        <div class="lab-tree">
            <ul ng-repeat="(group, observationsPerGroup) in vm.groupedObservations" ng-init="initLabTree()">
                <li class="lab-tree-top-level lab-tree-node lab-tree-observation-group-title">
                    <a ng-if="!isTopLevel(group)" href="#{{ observationsPerGroup[0].metricGroupIdentifier._id }}"
                       du-smooth-scroll du-scrollspy offset="100">{{ observationsPerGroup[0].metricGroupIdentifier.label | capitalize:true }}</a>

                    <div class="lab-tree-node lab-tree-observation-observation-title" ng-class="{ 'lab-tree-top-level': isTopLevel(group) }">
                        <a href="#{{ observation._id }}" ng-repeat="observation in observationsPerGroup" du-smooth-scroll du-scrollspy offset="100">
                            <span ng-if="observation.metricIdentifier">{{ observation.metricIdentifier.label | capitalize:true }}</span>
                            <span ng-if="!observation.metricIdentifier">{{ observation.code | codeableConcept | capitalize:true }}</span>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>

</div> 

<div ng-if="not.vm.observations.length" class="split-content empty-lab text-center">
    <a href="#">

        <h2>Filename.ext</h2>
    </a>
    <p>
        <i><span translate="LAB.CLICK_HERE_TO_VIEW_STUDY"></span></i>
    </p>
</div>