<div class="lab-diagnostic-report-state-bar">
		<ul class="details-item-list">
			<li ng-if="vm.patient" class="details-item">
				<img ng-src="images/icons/icon-patient.svg"> 
				<span class="item-name">{{ 'LAB.PATIENT' | translate | semicolon }}&nbsp;</span><span class="item-value">{{ vm.patient | patientFullName }}</span>
			</li>
			<li ng-if="vm.patient" class="details-item">
				<img ng-src="images/icons/icon-years-old.svg">
				<span class="item-name"> Edad: &nbsp;</span><span class="item-value">{{ vm.patient.birthDate | patientAgeAtReportDate:vm.reportDate:true }}</span>
			</li>
		</ul>
	</div>
<div>
	<div ng-if="!vm.hideHeader" class="lab-diagnostic-report-info">
		<ul class="details-item-list">
			<li ng-if="vm.patient" class="details-item">
				<img ng-src="images/icons/icon-patient.svg"> 
				<span class="item-name">{{ 'LAB.PATIENT' | translate | semicolon }}&nbsp;</span><span class="item-value">{{ vm.patient | patientFullName }}</span>
			</li>
			<li ng-if="vm.patient" class="details-item">
				<img ng-src="images/icons/icon-years-old.svg">
				<span class="item-name"> Edad: &nbsp;</span><span class="item-value">{{ vm.patient.birthDate | patientAgeAtReportDate:vm.reportDate:true }}</span>
			</li>
			<li ng-if="vm.patient" class="details-item">
				<img ng-src="images/icons/icon-mail.svg">  
				<span class="item-name">&nbsp;</span><span class="item-value"><a href="mailto:mateo@cdrossi.com.ar">mateo@cdrossi.com.ar</a></span>

			</li>
		</ul>
		<ul class="details-item-list stretch">
			<li ng-if="vm.organization" class="details-item">
				<img ng-src="images/icons/icon-medic.svg">
				<span class="item-name">MÃ©dico: &nbsp;</span><span class="item-value">Carlos Perez</span>
			</li>
			<li ng-if="vm.organization" class="details-item">
				<img ng-src="images/icons/icon-building.svg">
				<span class="item-name">{{ 'LAB.ORGANIZATION' | translate | semicolon }}&nbsp;</span><span class="item-value">{{ vm.organization.name }}</span>
			</li>
			<li ng-if="vm.status" class="details-item">
				<img ng-src="images/icons/icon-state.svg">  
				<span class="item-name">{{ 'LAB.STATUS' | translate | semicolon }}&nbsp;</span><span class="item-value">{{ vm.status | toStatusKey | translate }}&nbsp;<span class="item-value-help">({{ vm.status | toStatusKey:'_DESCRIPTION' | translate }})</span></span>
			</li>
		</ul>
	</div>

	<div ng-if="vm.observations.length" class="lab-diagnostic-report-observations split-content">

		<div class="primary-content" id="observations-container">
			<div class="observation-groups" ng-repeat="firstLevelObservation in vm.observations">
				<h2 ng-if="firstLevelObservation.related" id="{{ firstLevelObservation.id }}" class="observation-group-title">{{ getObservationDisplay(firstLevelObservation) | uppercase }}</span></h2>

				<div ng-repeat="observation in (observationList = getObservationList(firstLevelObservation))"
						 ng-if="showNext(observationList, observation, $index) || !observation.added"
						 class="observation-gallery-wrapper">

						<div class="observation-gallery" ng-if="!observation.added" ng-class="{'half': !!observation.valueString}">
							<div lab-observation
								 id="{{ observation.id }}"
								 class="lab-observation"
								 observation="observation"
								 actions="observation.actions"
								 header-actions="observation.headerActions"
								 view-only="vm.viewOnly"
								 compact-mode="vm.compactMode"
								 multi-range-mode="vm.displayObservationsWithMultipleRanges"
								 hide-title="vm.deDupeTopLevelObservations && firstLevelObservation.related && firstLevelObservation.related.length === 1"
								 patient-age-in-years="vm.patientAgeInYearsAtMomentOfReport"
								 patient-gender="vm.patientGender">
								<lab-history-graph ng-if="observation.showHistory && !!observation.history" observation-list="observation.history"></lab-history-graph>
							</div>
						</div>

						<div class="observation-gallery" ng-if="showNext(observationList, observation, $index)" ng-class="{'half': !!observationList[$index+1].valueString}">
							<div lab-observation
								 id="{{ observationList[$index+1].id }}"
								 class="lab-observation"
								 observation="observationList[$index+1]"
								 actions="observationList[$index+1].actions"
								 header-actions="observationList[$index+1].headerActions"
								 view-only="vm.viewOnly"
								 compact-mode="vm.compactMode"
								 multi-range-mode="vm.displayObservationsWithMultipleRanges"
								 hide-title="vm.deDupeTopLevelObservations && firstLevelObservation.related && firstLevelObservation.related.length === 1"
								 patient-age-in-years="vm.patientAgeInYearsAtMomentOfReport"
								 patient-gender="vm.patientGender">
								<lab-history-graph ng-if="observationList[$index+1].showHistory && !!observationList[$index+1].history" observation-list="observationList[$index+1].history"></lab-history-graph>
							</div>
						</div>
					</div>
			</div>
		</div>

		<div class="secondary-content">
			<div class="lab-tree">
				<ul ng-repeat="firstLevelObservation in vm.observations" ng-init="initLabTree()" class="lab-tree-group">
					<li class="lab-tree-top-level lab-tree-node lab-tree-observation-group-title" class="lab-tree-group-item">
						<a href="#{{ firstLevelObservation.id }}" du-smooth-scroll du-scrollspy offset="100">{{ getObservationDisplay(firstLevelObservation) | capitalize:true }}</a>

						<div ng-if="!isTopLevel(firstLevelObservation)" class="lab-tree-node lab-tree-observation-observation-title" ng-class="{ 'top-level-content': !isTopLevel(firstLevelObservation) }">
							<a href="#{{ observation.id }}" ng-repeat="observation in getObservationList(firstLevelObservation)" du-smooth-scroll du-scrollspy offset="100">
								<span >{{ observation.code | codeableConcept | capitalize:true }}</span>
							</a>
						</div>
					</li>
				</ul>
			</div>
		</div>

	</div>
</div>
